<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compra de Boletos</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css" />
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/src/main/resources/static/style.css">
</head>
<body>
<h1>Compra de Boletos</h1>
<form id="ticketForm" action="/buyTicket" method="post">

    <!-- paso 1 destino -->
    <div class="step active">
        <label for="fromLocation">De:</label>
        <select id="fromLocation" name="fromLocation" required>
            <option value="" disabled selected>Seleccione un lugar de origen</option>
            <th:block th:each="destination : ${listDestinations}">
                <option th:value="${destination.name}" th:text="${destination.name}"></option>
            </th:block>
        </select><br><br>

        <label for="toLocation">A:</label>
        <select id="toLocation" name="toLocation" required>
            <option value="" disabled selected>Seleccione un lugar de destino</option>
            <th:block th:each="destination : ${listDestinations}">
                <option th:value="${destination.name}" th:text="${destination.name}"></option>
            </th:block>
        </select><br><br>
        <div class="step-buttons">
            <button type="button" onclick="nextStep()">Siguiente</button>
        </div>
    </div>

    <!-- paso 2 fecha -->
    <div class="step">
        <label for="travelDate">Fecha:</label>
        <input type="date" id="travelDate" name="travelDate" required><br><br>
        <div class="step-buttons">
            <button class="btn-back" type="button" onclick="prevStep()">Regresar</button>
            <button class="btn-next" type="button" onclick="nextStep()">Siguiente</button>
        </div>
    </div>

    <!-- paso 3 hora -->
    <div class="step">
        <label for="travelTime">Selecione la hora</label>
        <div id="travelTime" name="travelTime"> 
            <input type="radio" id="5AM" name="travelTime" value="05:00">
            <label for="5AM">5AM</label><br>
            <input type="radio" id="12PM" name="travelTime" value="12:00">
            <label for="12PM">12PM</label><br>
            <input type="radio" id="4PM" name="travelTime" value="16:00">
            <label for="4PM">4PM</label><br>
        </div>
        <div class="step-buttons">
            <button type="button" onclick="prevStep()">Regresar</button>
            <button type="button" onclick="nextStep()">Siguiente</button>
        </div>
    </div>

    <!-- paso 4 asientos -->
    <div class="step">
        <label for="seatNumber">Asiento:</label>
        <div id="seatSelection">
            <th:block th:each="seat : ${seatList}">
                <i class="ti ti-armchair seat" th:classappend="${purchasedSeats.contains(seat) ? 'purchased' : ''}" th:data-seat="${seat}"></i>
            </th:block>
        </div>
        <input type="hidden" id="seatNumber" name="seatNumber" required><br><br>
        <div class="step-buttons">
            <button type="button" onclick="prevStep()">Regresar</button>
            <button type="button" onclick="nextStep()">Siguiente</button>
        </div>
    </div>

    <!-- paso 5 -->
    <div class="step">
        <label for="passengerName">Nombre del Pasajero:</label>
        <input type="text" id="passengerName" name="passengerName"><br><br>
        
        <label for="dni">Ingrese su DNI</label>
        <input pattern="\d{8}" maxlength="8" type="text" id="dni" name="dni"><br><br>
        <div class="step-buttons">
            <button type="button" onclick="prevStep()">Regresar</button>
            <button type="button" onclick="nextStep()">Siguiente</button>
        </div>
    </div>
    <!-- paso 6 -->
     <div class="step">
        <label for="paymentMethod">Método de Pago:</label><br>
        <label for="cardnumber">Número de tarjeta:</label><br>
        <input type="text" id="cardnumber" name="cardnumber" pattern="\d{16}" maxlength="16"><br><br>
        <label for="cardholder">Nombre del titular de la tarjeta:</label><br>
        <input type="text" id="cardholder" name="cardholder"><br><br>
        <label for="cvv">CVV:</label><br>
        <input type="text" id="cvv" name="cvv" pattern="\d{3}" maxlength="3" ><br><br>
        <label for="expiry">Fecha de expiración (MM/AA):</label><br>
        <input type="text" id="expiry" name="expiry" pattern="\d{2}/\d{2}" maxlength="5" placeholder="MM/AA"><br><br>
        <div class="step-buttons">
            <button type="button" onclick="prevStep()">Regresar</button>
            <button type="submit">Comprar Boleto</button>
        </div>
     </div>
</form>

<script>
    let currentStep = 0;
    const steps = document.querySelectorAll('.step');

    function showStep(step) {
        steps.forEach((s, index) => {
            s.classList.toggle('active', index === step);
        });
    }

    function nextStep() {
        if (currentStep < steps.length - 1) {
            currentStep++;
            showStep(currentStep);
        }
    }

    function prevStep() {
        if (currentStep > 0) {
            currentStep--;
            showStep(currentStep);
        }
    }
</script>
<script src="/main.js"></script>
</body>
</html>